!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.localforage=n()}}(function(){return function n(e,r,t){function o(u,a){if(!r[u]){if(!e[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=r[u]={exports:{}};e[u][0].call(s.exports,function(n){var r=e[u][1][n];return o(r?r:n)},s,s.exports,n,e,r,t)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<t.length;u++)o(t[u]);return o}({1:[function(n,e){function r(n){s[n]=function(){var e=arguments;return s.ready().then(function(){return s[n].apply(s,e)})}}for(var t=n("promise"),o=n("./drivers/indexeddb"),i=n("./drivers/localstorage"),u=n("./drivers/websql"),a={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},c=[a.INDEXEDDB,a.WEBSQL,a.LOCALSTORAGE],f=["clear","getItem","key","keys","length","removeItem","setItem"],s=e.exports={INDEXEDDB:a.INDEXEDDB,LOCALSTORAGE:a.LOCALSTORAGE,WEBSQL:a.WEBSQL,_config:{description:"",name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},config:function(n){if("object"==typeof n){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in n)this._config[e]=n[e];return!0}return"string"==typeof n?this._config[n]:this._config},driver:function(){return this._driver||null},_ready:!1,_driverSet:null,setDriver:function(n,e,r){var a=this;return"string"==typeof n&&(n=[n]),this._driverSet=new t(function(c,f){var s=a._getFirstSupportedDriver(n);if(!s){var l=new Error("No available storage method found.");return a._driverSet=t.reject(l),r&&r(l),void f(l)}a._ready=null;var d;switch(s){case a.INDEXEDDB:d=o;break;case a.LOCALSTORAGE:d=i;break;case a.WEBSQL:d=u}a._extend(d),e&&e(),c()}),this._driverSet},_getFirstSupportedDriver:function(n){var e=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};if(n&&e(n))for(var r=0;r<n.length;r++){var t=n[r];if(this.supports(t))return t}return null},supports:function(n){return!!l[n]},ready:function(n){var e=new t(function(n,e){s._driverSet.then(function(){null===s._ready&&(s._ready=s._initStorage(s._config)),s._ready.then(n,e)},e)});return e.then(n,n),e},_extend:function(n){for(var e in n)n.hasOwnProperty(e)&&(this[e]=n[e])}},l=function(n){var e=e||n.indexedDB||n.webkitIndexedDB||n.mozIndexedDB||n.OIndexedDB||n.msIndexedDB,r={};return r[s.WEBSQL]=!!n.openDatabase,r[s.INDEXEDDB]=!(!e||"function"!=typeof e.open||null!==e.open("_localforage_spec_test",1).onupgradeneeded),r[s.LOCALSTORAGE]=!!function(){try{return localStorage&&"function"==typeof localStorage.setItem}catch(n){return!1}}(),r}(window),d=0;d<f.length;d++)r(f[d]);s.setDriver(c)},{"./drivers/indexeddb":6,"./drivers/localstorage":7,"./drivers/websql":8,promise:4}],2:[function(n,e){function r(){}var t=e.exports={};t.nextTick=function(){var n="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(n)return function(n){return window.setImmediate(n)};if(e){var r=[];return window.addEventListener("message",function(n){var e=n.source;if((e===window||null===e)&&"process-tick"===n.data&&(n.stopPropagation(),r.length>0)){var t=r.shift();t()}},!0),function(n){r.push(n),window.postMessage("process-tick","*")}}return function(n){setTimeout(n,0)}}(),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=r,t.addListener=r,t.once=r,t.off=r,t.removeListener=r,t.removeAllListeners=r,t.emit=r,t.binding=function(){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(){throw new Error("process.chdir is not supported")}},{}],3:[function(n,e){"use strict";function r(n){function e(n){return null===f?void l.push(n):void i(function(){var e=f?n.onFulfilled:n.onRejected;if(null===e)return void(f?n.resolve:n.reject)(s);var r;try{r=e(s)}catch(t){return void n.reject(t)}n.resolve(r)})}function u(n){try{if(n===d)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if("function"==typeof e)return void o(e.bind(n),u,a)}f=!0,s=n,c()}catch(r){a(r)}}function a(n){f=!1,s=n,c()}function c(){for(var n=0,r=l.length;r>n;n++)e(l[n]);l=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");var f=null,s=null,l=[],d=this;this.then=function(n,o){return new r(function(r,i){e(new t(n,o,r,i))})},o(n,u,a)}function t(n,e,r,t){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.resolve=r,this.reject=t}function o(n,e,r){var t=!1;try{n(function(n){t||(t=!0,e(n))},function(n){t||(t=!0,r(n))})}catch(o){if(t)return;t=!0,r(o)}}var i=n("asap");e.exports=r},{asap:5}],4:[function(n,e){"use strict";function r(n){this.then=function(e){return"function"!=typeof e?this:new t(function(r,t){o(function(){try{r(e(n))}catch(o){t(o)}})})}}var t=n("./core.js"),o=n("asap");e.exports=t,r.prototype=Object.create(t.prototype);var i=new r(!0),u=new r(!1),a=new r(null),c=new r(void 0),f=new r(0),s=new r("");t.resolve=function(n){if(n instanceof t)return n;if(null===n)return a;if(void 0===n)return c;if(n===!0)return i;if(n===!1)return u;if(0===n)return f;if(""===n)return s;if("object"==typeof n||"function"==typeof n)try{var e=n.then;if("function"==typeof e)return new t(e.bind(n))}catch(o){return new t(function(n,e){e(o)})}return new r(n)},t.from=t.cast=function(n){var e=new Error("Promise.from and Promise.cast are deprecated, use Promise.resolve instead");return e.name="Warning",console.warn(e.stack),t.resolve(n)},t.denodeify=function(n,e){return e=e||1/0,function(){var r=this,o=Array.prototype.slice.call(arguments);return new t(function(t,i){for(;o.length&&o.length>e;)o.pop();o.push(function(n,e){n?i(n):t(e)}),n.apply(r,o)})}},t.nodeify=function(n){return function(){var e=Array.prototype.slice.call(arguments),r="function"==typeof e[e.length-1]?e.pop():null;try{return n.apply(this,arguments).nodeify(r)}catch(i){if(null===r||"undefined"==typeof r)return new t(function(n,e){e(i)});o(function(){r(i)})}}},t.all=function(){var n=1===arguments.length&&Array.isArray(arguments[0]),e=Array.prototype.slice.call(n?arguments[0]:arguments);if(!n){var r=new Error("Promise.all should be called with a single array, calling it with multiple arguments is deprecated");r.name="Warning",console.warn(r.stack)}return new t(function(n,r){function t(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,function(n){t(i,n)},r)}e[i]=u,0===--o&&n(e)}catch(c){r(c)}}if(0===e.length)return n([]);for(var o=e.length,i=0;i<e.length;i++)t(i,e[i])})},t.reject=function(n){return new t(function(e,r){r(n)})},t.race=function(n){return new t(function(e,r){n.forEach(function(n){t.resolve(n).then(e,r)})})},t.prototype.done=function(){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(n){o(function(){throw n})})},t.prototype.nodeify=function(n){return"function"!=typeof n?this:void this.then(function(e){o(function(){n(null,e)})},function(e){o(function(){n(e)})})},t.prototype["catch"]=function(n){return this.then(null,n)}},{"./core.js":3,asap:5}],5:[function(n,e){(function(n){function r(){for(;o.next;){o=o.next;var n=o.task;o.task=void 0;var e=o.domain;e&&(o.domain=void 0,e.enter());try{n()}catch(t){if(c)throw e&&e.exit(),setTimeout(r,0),e&&e.enter(),t;setTimeout(function(){throw t},0)}e&&e.exit()}u=!1}function t(e){i=i.next={task:e,domain:c&&n.domain,next:null},u||(u=!0,a())}var o={task:void 0,next:null},i=o,u=!1,a=void 0,c=!1;if("undefined"!=typeof n&&n.nextTick)c=!0,a=function(){n.nextTick(r)};else if("function"==typeof setImmediate)a="undefined"!=typeof window?setImmediate.bind(window,r):function(){setImmediate(r)};else if("undefined"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=r,a=function(){f.port2.postMessage(0)}}else a=function(){setTimeout(r,0)};e.exports=t}).call(this,n("_process"))},{_process:2}],6:[function(n,e){function r(n){if(n)for(var e in n)y[e]=n[e];return new l(function(n,e){var r=v.open(y.name,y.version);r.onerror=function(){e(r.error)},r.onupgradeneeded=function(){r.result.createObjectStore(y.storeName)},r.onsuccess=function(){d=r.result,n()}})}function t(n,e){var r=this;return new l(function(t,o){r.ready().then(function(){var r=d.transaction(y.storeName,"readonly").objectStore(y.storeName),i=r.get(n);i.onsuccess=function(){var n=i.result;void 0===n&&(n=null),s(e,n),t(n)},i.onerror=function(){e&&e(null,i.error),o(i.error)}},o)})}function o(n,e,r){var t=this;return new l(function(o,i){t.ready().then(function(){var t=d.transaction(y.storeName,"readwrite").objectStore(y.storeName);null===e&&(e=void 0);var u=t.put(e,n);u.onsuccess=function(){void 0===e&&(e=null),s(r,e),o(e)},u.onerror=function(){r&&r(null,u.error),i(u.error)}},i)})}function i(n,e){var r=this;return new l(function(t,o){r.ready().then(function(){var r=d.transaction(y.storeName,"readwrite").objectStore(y.storeName),i=r.delete(n);i.onsuccess=function(){s(e),t()},i.onerror=function(){e&&e(i.error),o(i.error)},i.onabort=function(n){var r=n.target.error;"QuotaExceededError"===r&&(e&&e(r),o(r))}},o)})}function u(n){var e=this;return new l(function(r,t){e.ready().then(function(){var e=d.transaction(y.storeName,"readwrite").objectStore(y.storeName),o=e.clear();o.onsuccess=function(){s(n),r()},o.onerror=function(){n&&n(null,o.error),t(o.error)}},t)})}function a(n){var e=this;return new l(function(r,t){e.ready().then(function(){var e=d.transaction(y.storeName,"readonly").objectStore(y.storeName),o=e.count();o.onsuccess=function(){n&&n(o.result),r(o.result)},o.onerror=function(){n&&n(null,o.error),t(o.error)}},t)})}function c(n,e){var r=this;return new l(function(t,o){return 0>n?(e&&e(null),void t(null)):void r.ready().then(function(){var r=d.transaction(y.storeName,"readonly").objectStore(y.storeName),i=!1,u=r.openCursor();u.onsuccess=function(){var r=u.result;return r?void(0===n?(e&&e(r.key),t(r.key)):i?(e&&e(r.key),t(r.key)):(i=!0,r.advance(n))):(e&&e(null),void t(null))},u.onerror=function(){e&&e(null,u.error),o(u.error)}},o)})}function f(n){var e=this;return new l(function(r,t){e.ready().then(function(){var e=d.transaction(y.storeName,"readonly").objectStore(y.storeName),o=e.openCursor(),i=[];o.onsuccess=function(){var e=o.result;return e?(i.push(e.key),void e.continue()):(n&&n(i),void r(i))},o.onerror=function(){n&&n(null,o.error),t(o.error)}},t)})}function s(n,e){return n?setTimeout(function(){return n(e)},0):void 0}var l=n("promise"),d=null,y={},v=v||window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB;v&&(e.exports={_driver:"asyncStorage",_initStorage:r,getItem:t,setItem:o,removeItem:i,clear:u,length:a,key:c,keys:f})},{promise:4}],7:[function(n,e){function r(n){if(n)for(var e in n)h[e]=n[e];return v=h.name+"/",y.resolve()}function t(n){var e=this;return new y(function(r,t){e.ready().then(function(){w.clear(),n&&n(),r()},t)})}function o(n,e){var r=this;return new y(function(t,o){r.ready().then(function(){try{var r=w.getItem(v+n);r&&(r=f(r)),e&&e(r),t(r)}catch(i){e&&e(null,i),o(i)}},o)})}function i(n,e){var r=this;return new y(function(t,o){r.ready().then(function(){var r;try{r=w.key(n)}catch(o){r=null}r&&(r=r.substring(v.length)),e&&e(r),t(r)},o)})}function u(n){var e=this;return new y(function(r,t){e.ready().then(function(){for(var e=w.length,t=[],o=0;e>o;o++)t.push(w.key(o).substring(v.length));n&&n(t),r(t)},t)})}function a(n){var e=this;return new y(function(r,t){e.ready().then(function(){var e=w.length;n&&n(e),r(e)},t)})}function c(n,e){var r=this;return new y(function(t,o){r.ready().then(function(){w.removeItem(v+n),e&&e(),t()},o)})}function f(n){if(n.substring(0,m)!==g)return JSON.parse(n);for(var e=n.substring(D),r=n.substring(m,D),t=new ArrayBuffer(2*e.length),o=new Uint16Array(t),i=e.length-1;i>=0;i--)o[i]=e.charCodeAt(i);switch(r){case b:return t;case A:return new Blob([t]);case E:return new Int8Array(t);case S:return new Uint8Array(t);case I:return new Uint8ClampedArray(t);case x:return new Int16Array(t);case _:return new Uint16Array(t);case j:return new Int32Array(t);case N:return new Uint32Array(t);case O:return new Float32Array(t);case k:return new Float64Array(t);default:throw new Error("Unkown type: "+r)}}function s(n){var e="",r=new Uint16Array(n);try{e=String.fromCharCode.apply(null,r)}catch(t){for(var o=0;o<r.length;o++)e+=String.fromCharCode(r[o])}return e}function l(n,e){var r="";if(n&&(r=n.toString()),n&&("[object ArrayBuffer]"===n.toString()||n.buffer&&"[object ArrayBuffer]"===n.buffer.toString())){var t,o=g;n instanceof ArrayBuffer?(t=n,o+=b):(t=n.buffer,"[object Int8Array]"===r?o+=E:"[object Uint8Array]"===r?o+=S:"[object Uint8ClampedArray]"===r?o+=I:"[object Int16Array]"===r?o+=x:"[object Uint16Array]"===r?o+=_:"[object Int32Array]"===r?o+=j:"[object Uint32Array]"===r?o+=N:"[object Float32Array]"===r?o+=O:"[object Float64Array]"===r?o+=k:e(new Error("Failed to get type for BinaryArray"))),e(o+s(t))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var n=s(this.result);e(g+A+n)},i.readAsArrayBuffer(n)}else try{e(JSON.stringify(n))}catch(u){this.console&&this.console.error&&this.console.error("Couldn't convert value into a JSON string: ",n),e(null,u)}}function d(n,e,r){var t=this;return new y(function(o,i){t.ready().then(function(){void 0===e&&(e=null);var t=e;l(e,function(e,u){if(u)r&&r(null,u),i(u);else{try{w.setItem(v+n,e)}catch(a){("QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&(r&&r(null,a),i(a))}r&&r(t),o(t)}})},i)})}var y=n("promise"),v="",h={},w=null;try{if(!(window.localStorage&&"setItem"in window.localStorage))return;w=window.localStorage}catch(p){return}var g="__lfsc__:",m=g.length,b="arbf",A="blob",E="si08",S="ui08",I="uic8",x="si16",j="si32",_="ur16",N="ui32",O="fl32",k="fl64",D=m+b.length;e.exports={_driver:"localStorageWrapper",_initStorage:r,getItem:o,setItem:d,removeItem:c,clear:t,length:a,key:i,keys:u}},{promise:4}],8:[function(n,e){function r(n){var e=this;if(n)for(var r in n)p[r]="string"!=typeof n[r]?n[r].toString():n[r];return new y(function(n,r){try{w=h(p.name,p.version,p.description,p.size)}catch(t){return e.setDriver("localStorageWrapper").then(n,r)}w.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+p.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){n()},function(n,e){r(e)})})})}function t(n,e){var r=this;return new y(function(t,o){r.ready().then(function(){w.transaction(function(r){r.executeSql("SELECT * FROM "+p.storeName+" WHERE key = ? LIMIT 1",[n],function(n,r){var o=r.rows.length?r.rows.item(0).value:null;o&&(o=l(o)),e&&e(o),t(o)},function(n,r){e&&e(null,r),o(r)})})},o)})}function o(n,e,r){var t=this;return new y(function(o,i){t.ready().then(function(){void 0===e&&(e=null);var t=e;d(e,function(e,u){u?i(u):w.transaction(function(u){u.executeSql("INSERT OR REPLACE INTO "+p.storeName+" (key, value) VALUES (?, ?)",[n,e],function(){r&&r(t),o(t)},function(n,e){r&&r(null,e),i(e)})},function(n){n.code===n.QUOTA_ERR&&(r&&r(null,n),i(n))})})},i)})}function i(n,e){var r=this;return new y(function(t,o){r.ready().then(function(){w.transaction(function(r){r.executeSql("DELETE FROM "+p.storeName+" WHERE key = ?",[n],function(){e&&e(),t()},function(n,r){e&&e(r),o(r)})})},o)})}function u(n){var e=this;return new y(function(r,t){e.ready().then(function(){w.transaction(function(e){e.executeSql("DELETE FROM "+p.storeName,[],function(){n&&n(),r()},function(e,r){n&&n(r),t(r)})})},t)})}function a(n){var e=this;return new y(function(r,t){e.ready().then(function(){w.transaction(function(e){e.executeSql("SELECT COUNT(key) as c FROM "+p.storeName,[],function(e,t){var o=t.rows.item(0).c;n&&n(o),r(o)},function(e,r){n&&n(null,r),t(r)})})},t)})}function c(n,e){var r=this;return new y(function(t,o){r.ready().then(function(){w.transaction(function(r){r.executeSql("SELECT key FROM "+p.storeName+" WHERE id = ? LIMIT 1",[n+1],function(n,r){var o=r.rows.length?r.rows.item(0).key:null;e&&e(o),t(o)},function(n,r){e&&e(null,r),o(r)})})},o)})}function f(n){var e=this;return new y(function(r,t){e.ready().then(function(){w.transaction(function(e){e.executeSql("SELECT key FROM "+p.storeName,[],function(e,t){for(var o=t.rows.length,i=[],u=0;o>u;u++)i.push(t.rows.item(u).key);n&&n(i),r(i)},function(e,r){n&&n(null,r),t(r)})})},t)})}function s(n){var e,r=new Uint8Array(n),t="";for(e=0;e<r.length;e+=3)t+=v[r[e]>>2],t+=v[(3&r[e])<<4|r[e+1]>>4],t+=v[(15&r[e+1])<<2|r[e+2]>>6],t+=v[63&r[e+2]];return r.length%3===2?t=t.substring(0,t.length-1)+"=":r.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function l(n){if(n.substring(0,m)!==g)return JSON.parse(n);var e,r,t,o,i,u=n.substring(D),a=n.substring(m,D),c=.75*u.length,f=u.length,s=0;"="===u[u.length-1]&&(c--,"="===u[u.length-2]&&c--);var l=new ArrayBuffer(c),d=new Uint8Array(l);for(e=0;f>e;e+=4)r=v.indexOf(u[e]),t=v.indexOf(u[e+1]),o=v.indexOf(u[e+2]),i=v.indexOf(u[e+3]),d[s++]=r<<2|t>>4,d[s++]=(15&t)<<4|o>>2,d[s++]=(3&o)<<6|63&i;switch(a){case b:return l;case A:return new Blob([l]);case E:return new Int8Array(l);case S:return new Uint8Array(l);case I:return new Uint8ClampedArray(l);case x:return new Int16Array(l);case _:return new Uint16Array(l);case j:return new Int32Array(l);case N:return new Uint32Array(l);case O:return new Float32Array(l);case k:return new Float64Array(l);default:throw new Error("Unkown type: "+a)}}function d(n,e){var r="";if(n&&(r=n.toString()),n&&("[object ArrayBuffer]"===n.toString()||n.buffer&&"[object ArrayBuffer]"===n.buffer.toString())){var t,o=g;n instanceof ArrayBuffer?(t=n,o+=b):(t=n.buffer,"[object Int8Array]"===r?o+=E:"[object Uint8Array]"===r?o+=S:"[object Uint8ClampedArray]"===r?o+=I:"[object Int16Array]"===r?o+=x:"[object Uint16Array]"===r?o+=_:"[object Int32Array]"===r?o+=j:"[object Uint32Array]"===r?o+=N:"[object Float32Array]"===r?o+=O:"[object Float64Array]"===r?o+=k:e(new Error("Failed to get type for BinaryArray"))),e(o+s(t))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var n=s(this.result);e(g+A+n)},i.readAsArrayBuffer(n)}else try{e(JSON.stringify(n))}catch(u){this.console&&this.console.error&&this.console.error("Couldn't convert value into a JSON string: ",n),e(null,u)}}var y=n("promise"),v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=window.openDatabase,w=null,p={},g="__lfsc__:",m=g.length,b="arbf",A="blob",E="si08",S="ui08",I="uic8",x="si16",j="si32",_="ur16",N="ui32",O="fl32",k="fl64",D=m+b.length;h&&(e.exports={_driver:"webSQLStorage",_initStorage:r,getItem:t,setItem:o,removeItem:i,clear:u,length:a,key:c,keys:f})},{promise:4}]},{},[1])(1)});